<?xml version="1.0" encoding="UTF-8"?>

<project name="OpenX" default="Level4" basedir=".">

	<!-- Load configuration data from properties -->
	<!-- <property file="./config/webtest.properties"/> -->
	<!-- <property file="./config/webtest.properties"/> -->
	<!-- <echo>${basedir}</echo> -->
	
<!--	<taskdef file="${wt.home}/webtestTaskdefs.properties">
		<classpath>
			<fileset dir="${wt.home}" includes="**/lib/*.jar" />
		</classpath>
	</taskdef>
-->	
	
	<target name="setup">
		<mkdir dir="${screens}" />
	</target>

	<target name="Level0" if="upgrade.isOn" depends="setup">	<!-- if="upgrade.isOn" -->
		<echo>Starting upgrade tests...</echo>
		<subant failonerror="${wt.failOnError}" inheritall="true">
        	<fileset dir="${testcase.dir}/level0" includes="${testcase.level0.pattern}"/>
        </subant>
		<echo>#################################</echo>		
		<echo># 0 level    tests - FINISHED!  #</echo>
		<echo>#################################</echo>				
	</target>
	
	<target name="Level1" if="test.level1" unless="upgrade.isOn" depends="Level0">
		<echo>Starting setup tests...</echo>
		<subant failonerror="${wt.failOnError}" inheritall="true">
        	<fileset dir="${testcase.dir}/level1" includes="${testcase.level1.pattern}"/>
        </subant>
		<echo>#################################</echo>		
		<echo># 1st level    tests - FINISHED!  #</echo>
		<echo>#################################</echo>				
	</target>
	
	<target name="Level2" if="test.level2" depends="Level1">	<!-- Level1 -->
		<echo>Starting smoke tests - 1st level...</echo>
			<ant antfile="${testcase.dir}/level2/openx.smoke.xml" />
		<echo>###################################</echo>		
		<echo># 2nd level smoke test - FINISHED!#</echo>
		<echo>###################################</echo>				
	</target>
	
    <target name="Level3" if="test.level3" unless="upgrade.isOn" depends="Level2">
		<echo>Starting UI tests - 3rd level...</echo>
		<echo>+-----------------------------------------+</echo>
		<echo>| WARNING! 3rd Level tests are optional	 |</echo>
		<echo>| and could fail without BUILD FAILED!	 |</echo>
		<echo>+-----------------------------------------+</echo>
		<subant failonerror="${wt.failOnError}" inheritall="true">
        	<fileset dir="${testcase.dir}/level3" includes="${testcase.level3.pattern}"/>
        </subant>
		<echo>2nd level smoke tests finished - check for potential errors!</echo>
    </target>

    <target name="Level4" if="test.level4" depends="Level3">
		<echo>Starting acceptance tests - 4th level...</echo>
		<echo>+-----------------------------------------+</echo>
		<echo>| WARNING! 4th Level tests are optional	 |</echo>
		<echo>| and could fail without BUILD FAILED!	 |</echo>
		<echo>+-----------------------------------------+</echo>
		<subant failonerror="${wt.failOnError}" inheritall="true">
        	<fileset dir="${testcase.dir}/level4" includes="${testcase.level4.pattern}"/>
        </subant>
		<echo>3rd level acceptance tests finished - check for potential errors!</echo>
    </target>

</project>
