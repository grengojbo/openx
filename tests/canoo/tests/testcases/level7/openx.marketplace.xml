<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE project [
  <!ENTITY config  SYSTEM "../modules/config_openx.xml">
  <!ENTITY login  SYSTEM "../modules/login_admin.xml">
  <!ENTITY common_verification  SYSTEM "../modules/common_pages.xml">
]>

<project name="OpenX Level7 - Marketplace plugin test" basedir="." default="main">
	<target name="main">
		<webtest name="OpenX Level7 - Marketplace plugin test if requested">
			&config;
			<steps>				
				<ifStep description="production tests">
			        <condition>
			        	<verifyProperty description="Check if marketplace plugin should be enabled" name="marketplace.enabled" propertyType="ant" text="true" />
		        	</condition>
        	        <then>        	        	
						&login;
        	        	<!-- &common_verification; -->
						<clickLink label="Administrator account"/>
        	        	<clickLink label="My Account"/>
        	        	<clickLink label="OpenX Market"/>
						<not>
							<verifyText text="Not Found" />
							<verifyText text="was not found on this server" />
						</not>
        	        	<clickButton description="Click 'Get started' button"/>        	  
        	        	<setRadioButton description="Check radio button accountMode: signup" name="accountMode" value="signup"/>
        	        	<setInputField name="m_new_email" value="test@openx.org"/>
        	        	<setInputField name="m_new_username" value="openx"/>
        	        	<setInputField description="Set password field m_new_password: openx" name="m_new_password" value="openx"/>
        	        	<setInputField description="Set password field m_new_confirm_password: openx" name="m_new_confirm_password" value="openx"/>
        	        	<setCheckbox name="openx_terms_agree"/>
        	        	<setCheckbox name="market_terms_agree"/>
        	        	<setInputField name="m_captcha" value="openx"/>
        	        	<clickButton label="Submit"/>
           	        </then>
			    </ifStep>		
			</steps>
		</webtest>
	</target>
</project>