
{if $oxInstalled}
<form id='settingsform' name='settingsform' ENCTYPE='multipart/form-data' method='post' action='{$formUrl}' onSubmit='return max_formValidate(this);'>
    {if $adminUser && $optionType == 'account-settings'}
    <br />
    <div class='errormessage'><img class='errormessage' src='{$assetPath|escape}/images/padlock-{$image}.gif' width='16' height='16' border='0' align='absmiddle'>
        {if $configLocked}{t str=EditConfigNotPossible}{else}{t str=EditConfigPossible}{/if}
    </div>
    {/if}
{/if}

{foreach from=$aOption key=key item=aValue}
	{foreach from=$aValue key=filename item=aItem}
        {include file=options/$filename aItem=$aItem}
    {/foreach}
{/foreach}

{if $oxInstalled}
    <br /><br /><input type="submit" name="submitsettings" value="{t str=SaveChanges}" tabindex="{$tabindex++}"></form>
{/if}

{literal}
<script language='JavaScript'>
<!--
    function setUploadConversionValues() {
        document.settingsform.start_upload.value = 1;
        document.settingsform.submit();
    }

    function toggleSocketInput() {
        var dbTypeObj      = new getObj('aConfig[database][type]');
        if (dbTypeObj.obj) {
            var localSocketObj = new getObj('aConfig[database][localsocket]');
            var socketObj      = new getObj('aConfig[database][socket]');
            var portObj        = new getObj('aConfig[database][port]');
            var hostObj        = new getObj('aConfig[database][host]');
        } else {
            var dbTypeObj      = new getObj('database_type');
            var localSocketObj = new getObj('database_localsocket');
            var socketObj      = new getObj('database_socket');
            var portObj        = new getObj('database_port');
            var hostObj        = new getObj('database_host');
        }

        if (localSocketObj.obj.disabled) return;

        if (localSocketObj.obj.checked == true) {
            hostObj.obj.disabled = true;
            if (dbTypeObj.obj.value == 'mysql') {
                socketObj.obj.disabled = false;
                portObj.obj.disabled = true;
            } else {
                socketObj.obj.disabled = true;
                portObj.obj.disabled = false;
            }
        } else {
            socketObj.obj.disabled = true;
            hostObj.obj.disabled = false;
            if (dbTypeObj.obj.value == 'mysql') {
                portObj.obj.disabled = false;
            }
        }
    }
//-->
</script>
<script language='JavaScript'>
<!--
{/literal}
{$dependbuffer}
{literal}
}

phpAds_refreshEnabled();
{/literal}

{if $section == 'database'}
toggleSocketInput();
{/if}

{$checkbuffer}
{$usertypebuffer}
{literal}
//--></script>
{/literal}
